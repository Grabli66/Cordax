// Generated by Haxe 4.0.0-preview.4+1e3e5e0
(function ($global) { "use strict";
var $hxEnums = {};
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var HxOverrides = function() { };
HxOverrides.__name__ = ["HxOverrides"];
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
Math.__name__ = ["Math"];
var StringTools = function() { };
StringTools.__name__ = ["StringTools"];
StringTools.hex = function(n,digits) {
	var s = "";
	var hexChars = "0123456789ABCDEF";
	while(true) {
		s = hexChars.charAt(n & 15) + s;
		n >>>= 4;
		if(!(n > 0)) {
			break;
		}
	}
	if(digits != null) {
		while(s.length < digits) s = "0" + s;
	}
	return s;
};
var Type = function() { };
Type.__name__ = ["Type"];
Type.getClassName = function(c) {
	var a = c.__name__;
	if(a == null) {
		return null;
	}
	return a.join(".");
};
var cordax_Cordax = function() { };
cordax_Cordax.__name__ = ["cordax","Cordax"];
cordax_Cordax.run = function(view) {
	cordax_Cordax.document = new cordax_Document();
	cordax_Cordax.render = new cordax_native_html_HtmlRender();
	cordax_Cordax.document.onChange = function(changedView) {
		cordax_Cordax.render.render(cordax_Cordax.document,changedView);
		return;
	};
	cordax_Cordax.document.set_root(view);
};
cordax_Cordax.setTitle = function(title) {
	window.document.getElementsByTagName("title")[0].innerText = title;
};
var cordax_Document = function() {
	this.set_isDirty(false);
};
cordax_Document.__name__ = ["cordax","Document"];
cordax_Document.prototype = {
	get_root: function() {
		return this.rootView;
	}
	,set_root: function(value) {
		this.rootView = value;
		this.set_isDirty(true);
		return value;
	}
	,get_isDirty: function() {
		return this.isDirtyInternal;
	}
	,set_isDirty: function(value) {
		this.isDirtyInternal = value;
		if(this.onChange != null) {
			this.onChange(null);
		}
		this.isDirtyInternal = false;
		return this.isDirtyInternal;
	}
	,notifyChange: function(view) {
		this.isDirtyInternal = true;
		if(this.onChange != null) {
			this.onChange(view);
		}
		this.isDirtyInternal = false;
	}
	,__class__: cordax_Document
};
var cordax_ui_View = function() {
	this.id = cordax_ui_Guid.generate();
	console.log("src/cordax/ui/View.hx:37:",this.id);
};
cordax_ui_View.__name__ = ["cordax","ui","View"];
cordax_ui_View.prototype = {
	get_name: function() {
		var fullName = Type.getClassName(js_Boot.getClass(this));
		var items = fullName.split(".");
		return items[items.length - 1];
	}
	,setState: function() {
		cordax_Cordax.document.set_isDirty(true);
	}
	,render: function() {
		return null;
	}
	,toElement: function() {
		var res = new cordax_native_Element(this.get_name());
		var childView = this.render();
		if(childView != null) {
			res.addChild(childView.toElement());
		}
		return res;
	}
	,__class__: cordax_ui_View
};
var cordax_layouts_Column = function(settings) {
	cordax_ui_View.call(this);
	this.settings = settings;
};
cordax_layouts_Column.__name__ = ["cordax","layouts","Column"];
cordax_layouts_Column.__super__ = cordax_ui_View;
cordax_layouts_Column.prototype = $extend(cordax_ui_View.prototype,{
	toElement: function() {
		var res = new cordax_native_Element(this.get_name());
		var _g = 0;
		var _g1 = this.settings.childs;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			res.addChild(child.toElement());
		}
		return res;
	}
	,__class__: cordax_layouts_Column
});
var cordax_native_Element = function(name) {
	this.childArray = [];
	this.name = name;
};
cordax_native_Element.__name__ = ["cordax","native","Element"];
cordax_native_Element.prototype = {
	get_childs: function() {
		return HxOverrides.iter(this.childArray);
	}
	,addChild: function(child) {
		this.childArray.push(child);
	}
	,__class__: cordax_native_Element
};
var cordax_native_IRender = function() { };
cordax_native_IRender.__name__ = ["cordax","native","IRender"];
cordax_native_IRender.prototype = {
	__class__: cordax_native_IRender
};
var cordax_native_html_HtmlRender = function() {
};
cordax_native_html_HtmlRender.__name__ = ["cordax","native","html","HtmlRender"];
cordax_native_html_HtmlRender.__interfaces__ = [cordax_native_IRender];
cordax_native_html_HtmlRender.prototype = {
	createHtmlElement: function(element) {
		var res = window.document.createElement("div");
		res.className = element.name.toLowerCase();
		if(element.text != null) {
			res.innerText = element.text;
		}
		if(element.onClick != null) {
			res.onclick = element.onClick;
		}
		return res;
	}
	,renderChildsRecursive: function(root,element) {
		var child = element.get_childs();
		while(child.hasNext()) {
			var child1 = child.next();
			var childDiv = this.createHtmlElement(child1);
			this.renderChildsRecursive(childDiv,child1);
			root.appendChild(childDiv);
		}
	}
	,render: function(document,view) {
		console.log("src/cordax/native/html/HtmlRender.hx:44:","RENDER");
		if(view == null) {
			var element = document.get_root().toElement();
			window.document.body.innerHTML = "";
			var root = this.createHtmlElement(element);
			this.renderChildsRecursive(root,element);
			window.document.body.appendChild(root);
		}
	}
	,__class__: cordax_native_html_HtmlRender
};
var cordax_ui_App = function(settings) {
	cordax_ui_View.call(this);
	this.settings = settings;
};
cordax_ui_App.__name__ = ["cordax","ui","App"];
cordax_ui_App.__super__ = cordax_ui_View;
cordax_ui_App.prototype = $extend(cordax_ui_View.prototype,{
	toElement: function() {
		cordax_Cordax.setTitle(this.settings.title);
		var res = new cordax_native_Element(this.get_name());
		res.addChild(this.settings.content.toElement());
		return res;
	}
	,__class__: cordax_ui_App
});
var cordax_ui_Button = function(settings) {
	cordax_ui_View.call(this);
	this.settings = settings;
};
cordax_ui_Button.__name__ = ["cordax","ui","Button"];
cordax_ui_Button.__super__ = cordax_ui_View;
cordax_ui_Button.prototype = $extend(cordax_ui_View.prototype,{
	toElement: function() {
		var res = new cordax_native_Element(this.get_name());
		res.text = this.settings.text;
		res.onClick = this.settings.onClick;
		return res;
	}
	,__class__: cordax_ui_Button
});
var cordax_ui_Text = function(settings) {
	cordax_ui_View.call(this);
	this.settings = settings;
};
cordax_ui_Text.__name__ = ["cordax","ui","Text"];
cordax_ui_Text.__super__ = cordax_ui_View;
cordax_ui_Text.prototype = $extend(cordax_ui_View.prototype,{
	toElement: function() {
		var res = new cordax_native_Element(this.get_name());
		res.text = this.settings.text;
		return res;
	}
	,__class__: cordax_ui_Text
});
var cordax_ui_Guid = function() { };
cordax_ui_Guid.__name__ = ["cordax","ui","Guid"];
cordax_ui_Guid.generate = function() {
	var result = "";
	var _g = 0;
	while(_g < 32) {
		var j = _g++;
		if(j == 8 || j == 12 || j == 16 || j == 20) {
			result += "-";
		}
		result += StringTools.hex(Math.floor(Math.random() * 16));
	}
	return result.toUpperCase();
};
var js_Boot = function() { };
js_Boot.__name__ = ["js","Boot"];
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var mobile_$web_MyApp = function() {
	cordax_ui_View.call(this);
	this.count = 1;
};
mobile_$web_MyApp.__name__ = ["mobile_web","MyApp"];
mobile_$web_MyApp.__super__ = cordax_ui_View;
mobile_$web_MyApp.prototype = $extend(cordax_ui_View.prototype,{
	render: function() {
		var _gthis = this;
		this.caption = "Clicked: " + this.count;
		return new cordax_ui_App({ title : "App", content : new cordax_layouts_Column({ childs : [new cordax_ui_Text({ text : this.caption}),new cordax_ui_Button({ text : "Click me!", onClick : function() {
			_gthis.count += 1;
			_gthis.setState();
			return;
		}})]})});
	}
	,__class__: mobile_$web_MyApp
});
var mobile_$web_Main = function() {
};
mobile_$web_Main.__name__ = ["mobile_web","Main"];
mobile_$web_Main.main = function() {
	var app = new mobile_$web_Main();
	app.start();
};
mobile_$web_Main.prototype = {
	render: function() {
		cordax_Cordax.run(new mobile_$web_MyApp());
	}
	,start: function() {
		this.render();
	}
	,__class__: mobile_$web_Main
};
String.prototype.__class__ = String;
String.__name__ = ["String"];
Array.__name__ = ["Array"];
js_Boot.__toStr = ({ }).toString;
mobile_$web_Main.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
